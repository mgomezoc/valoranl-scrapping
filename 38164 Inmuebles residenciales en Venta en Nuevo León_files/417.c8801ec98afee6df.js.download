"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417,8475],{30417:function(e,a,r){r.r(a),r.d(a,{default:function(){return m}});var t=r(85893),i=r(67294),o=r(964);(0,o.keyframes)(["from{opacity:0;}to{opacity:1;}"]);let n=o.default.button.withConfig({componentId:"sc-6f774034-0"})(["background-color:",";span.text-base{font-size:16px;}border:2px solid ",";transition:background-color 0.5s ease-in-out,border-color 0.5s ease-in-out;border-radius:100px;color:",";right:0px;padding:7px;svg{width:25px;vertical-align:middle;path{fill:",";}}span{padding-left:8px;vertical-align:middle;font-size:14px;font-weight:700;line-height:25px;}&:hover{cursor:pointer;}&.pcom-sticky-property{border:solid 1px #d9d9d9;background-color:",";svg{path{fill:",";}}span{display:none;}}@media ","{width:",";height:",";padding:",";background-color:",";border-color:",";color:",";svg{width:25px;vertical-align:middle;path{fill:",";}}}"],e=>{let{theme:a,changeColor:r}=e;switch(r){case"ficha":return a.color.white;case"whatsapp":return`${a.color.whatsappColor} !important`;case"default":return a.color.greenPrimary}},e=>{let{theme:a,changeColor:r}=e;switch(r){case"ficha":case"default":return a.color.greenPrimary;case"whatsapp":return`${a.color.whatsappColor} !important`}},e=>{let{theme:a,changeColor:r}=e;switch(r){case"ficha":return a.color.greenPrimary;case"whatsapp":case"default":return a.color.white}},e=>{let{theme:a,changeColor:r}=e;switch(r){case"ficha":return a.color.greenPrimary;case"whatsapp":case"default":return a.color.white}},e=>{let{theme:a}=e;return a.color.white},e=>{let{theme:a,changeColor:r}=e;switch(r){case"ficha":return a.color.greenPrimary;case"whatsapp":case"default":return a.color.white}},e=>{let{theme:a}=e;return a.screenSizes.laptop},e=>e["width-lg"]?e["width-lg"]:"auto",e=>e["height-lg"]?e["height-lg"]:"auto",e=>e["padding-lg"]?e["padding-lg"]:"7px",e=>{let{theme:a}=e;return a.color.greenPrimary},e=>{let{theme:a}=e;return a.color.greenPrimary},e=>{let{theme:a}=e;return a.color.white},e=>{let{theme:a}=e;return a.color.white});n.defaultProps={changeColor:"default"};var c=r(78414),s=r(39948),_=r(5121),l=r(45533),p=r(11163);let d=()=>{let e=(0,p.useRouter)();return async a=>{let r;let t="https://propiedades.com/properties/StartChatSudonum";if((0,l.S)()){let e=window.location.href,a=new URL(e);r=`${t}${a.search}`}else{let a=e.asPath.split("?")[1]||"";r=`${t}${a?`?${a}`:""}`}let i=new FormData;return i.append("id",a),_.Z.post(r,i,{headers:{"Content-Type":"multipart/form-data",cucu:1}})}};var g=r(17912),u=r(79092),k=r(85518),h=r(45007),w=r(55434),m=e=>{let{propertyId:a,source:r,className:o,closeContact:_,trackingParams:l,caseColorDefault:p="default",openContact:m,setInfoContactWhatsapp:v,updateConfigurationContact:T,configurationContact:f,...y}=e,{mobile:b}=(0,i.useContext)(s.z),[E,C]=(0,i.useState)(p),[x,S]=(0,i.useState)(!1),[R,L]=(0,i.useState)(0),[N,P]=(0,i.useState)(0),U=(0,i.useRef)(null),q=u.Y[u.TrackingContact.category.Tracking_whatsapp];(0,h.I0)();let F=d(),$="",Z="",[D]=(0,i.useState)(Date.now());(0,i.useEffect)(()=>{let e=setTimeout(()=>{"Ficha_Sticky"===r&&C("whatsapp")},3e3);return()=>clearTimeout(e)},[]),(0,i.useEffect)(()=>{let e=()=>{L(e=>e+1),R>=3&&S(!0)},a=()=>{S(!0)},r=()=>{S(!0)},t=()=>{S(!0)},i=()=>{S(!0)};return document.addEventListener("mousemove",e,{passive:!0}),document.addEventListener("scroll",a,{passive:!0}),document.addEventListener("keydown",r,{passive:!0}),document.addEventListener("touchstart",t,{passive:!0}),document.addEventListener("touchmove",i,{passive:!0}),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("scroll",a),document.removeEventListener("keydown",r),document.removeEventListener("touchstart",t),document.removeEventListener("touchmove",i)}},[R]);let{Tracking_position_gallery:M,Tracking_position_sticky:z,Tracking_position_list:A}=u.TrackingContact.position,{Track_view_ficha:I,Track_view_simple_list:Y,Track_view_prop_similares:j,Track_view_guia:B,Track_view_portafolio:G}=u.TrackingContact.view;switch(r){case"Ficha":Z=u.Uf[I],$=l&&l.position?l.position:"";break;case"Ficha_Galeria":Z=u.Uf[I],$=M;break;case"Ficha_Sticky":case"Ficha_Sticky_Top":Z=u.Uf[I],$=z;break;case"ActionsContact":Z=u.Uf[I];break;case"Listing":$=A,Z=u.Uf[Y];break;case"Portafolio":$=A,Z=u.Uf[G];break;case"prop_similares":$=A,Z=u.Uf[j];break;case"ResultGuide":$=A,Z=u.Uf[B]}let W=(0,i.useCallback)(()=>{let e=Date.now(),a=e-D,r=e-N;return a<2e3?(console.warn("Bot protection: Tiempo insuficiente en la p\xe1gina"),!1):r<3e3?(console.warn("Bot protection: Click demasiado r\xe1pido"),!1):!!k.tq&&a>=2e3||!!x||(console.warn("Bot protection: No se detect\xf3 interacci\xf3n humana"),!1)},[D,N,x]),H=async e=>{if(!W()){console.warn("Acceso denegado: Interacci\xf3n no v\xe1lida detectada");return}P(Date.now());let r=k.tq?window:window.open("","_blank");try{e.preventDefault(),e.stopPropagation(),(0,g.Z)(a,"open",q,$,Z,b?.search);let t=await F(a);if(!t?.data)throw Error("Respuesta inv\xe1lida del servidor");if(null!==t.data.error&&void 0!==t.data.error)throw console.error("Error en la respuesta de postInfoSudonum:",t.data.error),Error(t.data.error);if(void 0!==t.data.isNewLead&&!t.data.data){if(t.data.isNewLead){if(t.data.chat_link)k.tq?document.location.href=t.data.chat_link:r.location.href=t.data.chat_link,(0,g.Z)(a,u.UF[u.TrackingContact.event.Tracking_action_success],q,$,Z,b?.search);else throw console.error("No se recibi\xf3 chat_link para nuevo lead"),Error("No se pudo obtener el enlace de chat")}else k.tq||r.close(),v&&v({phone_contact:"NA"===t.data.phone_contact?[]:[t.data.phone_contact],publisher_name:t.data.publisher_name||""}),m&&m(e),T&&T({...f,step:w.W.StepThankYouPage});return}if(!t.data.data)throw console.error("Estructura de datos inv\xe1lida en la respuesta:",t.data),Error("Estructura de datos inv\xe1lida");if(t.data.data.isNewLead){if(t.data.data.chat_link)k.tq?document.location.href=t.data.data.chat_link:r.location.href=t.data.data.chat_link,(0,g.Z)(a,u.UF[u.TrackingContact.event.Tracking_action_success],q,$,Z,b?.search);else throw console.error("No se recibi\xf3 chat_link para nuevo lead"),Error("No se pudo obtener el enlace de chat")}else k.tq||r.close(),v&&v({phone_contact:"NA"===t.data.data.phone_contact?[]:[t.data.data.phone_contact],publisher_name:t.data.data.publisher_name||""}),m&&m(e),T&&T({...f,step:w.W.StepThankYouPage})}catch(a){k.tq||r.close(),console.error("Error obteniendo el link",a),m&&m(e)}},J=Math.random().toString(36).substr(2,12),K=Math.random().toString(36).substr(2,8),O=Math.random().toString(36).substr(2,10),Q=Math.random().toString(36).substr(2,6),V=Math.random().toString(36).substr(2,4);return(0,t.jsxs)(n,{ref:U,id:J,className:`${o} ${K}`,changeColor:E,"data-gtm":"whatsapp","data-interaction-time":D,onClick:e=>H(e),name:O,style:{pointerEvents:x?"auto":"none",opacity:x?1:.7},...y,children:[(0,t.jsx)(c.Z,{className:Q,icon:"pcom-icon-whatsapp"}),(0,t.jsx)("span",{className:"Ficha_Galeria"===r?"text-base":"","data-text":V,children:"Consultar"})]})}},17912:function(e,a,r){r(67294);var t=r(5121),i=r(29916),o=r(61299);async function n(e,a,r,n,c,s){let _=(0,i.Z)(window.location.hash),l={id:e,evento:a,category:r,position:n,view:c,utm_source:(0,o.re)("utm_source"),utm_campaign:(0,o.re)("utm_campaign"),utm_medium:(0,o.re)("utm_medium"),utm_term:(0,o.re)("utm_term"),utm_content:(0,o.re)("utm_content"),referral:(0,o.ac)()?(0,o.ac)():null},p=new FormData;for(let e in l)void 0!==l[e]&&p.append(e,l[e]);for(let e in("lista"===c||"guia"===c)&&(_.purpose=s?.purpose,_.area=s?.area_url,_.type=s?.type,_.subtype=s?.subtype),_)void 0!==_[e]&&p.append(`params[${e}]`,_[e]);t.Z.post("https://propiedades.com/properties/tracking",p,{headers:{"Content-Type":"multipart/form-data",cucu:1}}).catch(e=>{t.Z.isCancel(e)&&console.log("Previous request canceled, new request is send",e.message)})}a.Z=n},79092:function(e,a,r){r.d(a,{TrackingContact:function(){return t},UF:function(){return o},Uf:function(){return n},Y:function(){return i}});let t={position:{Tracking_position_right:1,Tracking_position_left:2,Tracking_position_sticky:3,Tracking_position_gallery:4,Tracking_position_gallery_max:5,Tracking_position_list:6,Tracking_position_right_phone_contact:7},event:{Tracking_action_open:1,Tracking_action_send:2,Tracking_action_success:3,Tracking_action_print:4,Tracking_action_view:5,Tracking_action_open_gallery:6,Tracking_action_share_email:7,Tracking_action_share_twitter:8,Tracking_action_share_facebook:9,Tracking_action_view_specs:10,Tracking_action_view_more:11,Tracking_action_view_amenities:12,Tracking_action_view_showrooms:13,Tracking_action_activar_correo:14,Tracking_action_clic_web:15,Tracking_action_download_app:16,Tracking_action_close:17},category:{Tracking_contact_phone:1,Tracking_contact_email:2,Tracking_properties_result:3,Tracking_galleries:4,Tracking_shared:5,Tracking_mortgage_credit:6,Tracking_units:7,Tracking_details:8,Tracking_engagement:9,Tracking_whatsapp:10,Tracking_property_typ:11,Tracking_property_sm:12,Tracking_property_sb:13,Tracking_property_rss:14,Tracking_property_lsn:15,Tracking_banner_app:16,Tracking_categories_result:17,Tracking_prequalified:18},referer:{Referer_thankyou_page:1,Referer_similar:2,Referer_recommendation:3,Referer_results_showrooms_slider:4,Referer_landing_showrooms_nuevos:5,Referer_results_popular_categories:6},view:{Track_view_list:1,Track_view_map:2,Track_view_home:3,Track_view_static:4,Track_view_admin:5,Track_view_simple_list:6,Track_view_guia:7,Track_view_ficha:8,Track_view_typ:9,Track_view_creditos:10,Track_view_valores:11,Track_view_catastros:12,Track_view_prop_similares:13,Track_view_portafolio:14}};t.referer.Referer_thankyou_page,t.referer.Referer_similar,t.referer.Referer_recommendation,t.referer.Referer_results_showrooms_slider,t.referer.Referer_landing_showrooms_nuevos,t.referer.Referer_results_popular_categories;let i={[t.category.Tracking_contact_phone]:"contact_phone",[t.category.Tracking_contact_email]:"contact_email",[t.category.Tracking_properties_result]:"properties_result",[t.category.Tracking_galleries]:"galleries",[t.category.Tracking_shared]:"share",[t.category.Tracking_mortgage_credit]:"mortgage_credit",[t.category.Tracking_units]:"units",[t.category.Tracking_details]:"details",[t.category.Tracking_engagement]:"engagement",[t.category.Tracking_whatsapp]:"contact_whatsapp",[t.category.Tracking_property_typ]:"property_typ",[t.category.Tracking_property_sm]:"property_sm",[t.category.Tracking_property_sb]:"property_sb",[t.category.Tracking_property_rss]:"property_rss",[t.category.Tracking_property_lsn]:"property_lsn",[t.category.Tracking_banner_app]:"banner_app",[t.category.Tracking_categories_result]:"categories_result",[t.category.Tracking_prequalified]:"prequalified"},o={[t.event.Tracking_action_open]:"open",[t.event.Tracking_action_send]:"send",[t.event.Tracking_action_success]:"success",[t.event.Tracking_action_print]:"print",[t.event.Tracking_action_view]:"view",[t.event.Tracking_action_open_gallery]:"open_gallery",[t.event.Tracking_action_share_email]:"share_mail",[t.event.Tracking_action_share_twitter]:"share_tw",[t.event.Tracking_action_share_facebook]:"share_fb",[t.event.Tracking_action_view_specs]:"view_specs",[t.event.Tracking_action_view_more]:"view_more",[t.event.Tracking_action_view_amenities]:"view_amenities",[t.event.Tracking_action_view_showrooms]:"view_showrooms",[t.event.Tracking_action_activar_correo]:"correo_activar",[t.event.Tracking_action_clic_web]:"clic_version_web",[t.event.Tracking_action_download_app]:"download_app",[t.event.Tracking_action_close]:"close"},n={[t.view.Track_view_list]:"galeria",[t.view.Track_view_map]:"mapa",[t.view.Track_view_home]:"home",[t.view.Track_view_static]:"static",[t.view.Track_view_admin]:"admin",[t.view.Track_view_simple_list]:"lista",[t.view.Track_view_guia]:"guia",[t.view.Track_view_ficha]:"ficha",[t.view.Track_view_typ]:"typ",[t.view.Track_view_creditos]:"creditos",[t.view.Track_view_valores]:"valores",[t.view.Track_view_catastros]:"catastros",[t.view.Track_view_prop_similares]:"prop_similares",[t.view.Track_view_portafolio]:"portafolio"}}}]);